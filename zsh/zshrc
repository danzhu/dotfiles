#!/bin/zsh

# --- history ---
setopt appendhistory histignorealldups sharehistory

HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000


# --- directory ---
setopt autocd


# --- tools ---
autoload -Uz run-help
if (( $+aliases[run-help] )); then
    unalias run-help
fi
alias help='run-help'

autoload -Uz zmv
alias zmv='noglob zmv'


# --- common ---
source $DOT/shell/aliases
source $DOT/shell/functions


# --- customizations ---
source $DOT/zsh/title.zsh
source $DOT/zsh/prompt.zsh
source $DOT/zsh/keybinds.zsh
source $DOT/zsh/completion.zsh


# --- freeze tty ---
ttyctl -f


# --- plugins ---
if [[ -r /usr/share/doc/pkgfile/command-not-found.zsh ]]; then
    source /usr/share/doc/pkgfile/command-not-found.zsh
fi


# --- zplug ---
export ZPLUG_HOME=$DOT/zsh/zplug

if [[ -r $ZPLUG_HOME/init.zsh ]]; then
    source $ZPLUG_HOME/init.zsh

    zplug 'zplug/zplug', hook-build:'zplug --self-manage'

    zplug 'mafredri/zsh-async'

    # zplug 'sindresorhus/pure', use:pure.zsh, as:theme

    zplug 'MichaelAquilina/zsh-you-should-use'

    zplug 'hlissner/zsh-autopair', defer:2

    zplug 'zsh-users/zsh-autosuggestions', defer:2

    zplug 'zsh-users/zsh-syntax-highlighting', defer:2
    ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets)

    zplug load
fi
